(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{657:function(t,e,a){Promise.resolve().then(a.t.bind(a,9974,23)),Promise.resolve().then(a.bind(a,9064)),Promise.resolve().then(a.t.bind(a,2778,23)),Promise.resolve().then(a.bind(a,7928)),Promise.resolve().then(a.bind(a,9398))},7928:function(t,e,a){"use strict";a.d(e,{default:function(){return r}});var o=a(2265),s=a(6602);function r(){let{initialize:t}=(0,s.t)();return(0,o.useEffect)(()=>{t()},[t]),null}},9398:function(t,e,a){"use strict";a.d(e,{F:function(){return i},ThemeProvider:function(){return n}});var o=a(7437),s=a(2265);let r=(0,s.createContext)(void 0);function n(t){let{children:e}=t,[a,n]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let t=localStorage.getItem("theme");t&&n(t)},[]),(0,s.useEffect)(()=>{let t=window.document.documentElement;t.classList.remove("light","dark"),t.classList.add(a),localStorage.setItem("theme",a)},[a]),(0,o.jsx)(r.Provider,{value:{theme:a,toggleTheme:()=>{n(t=>"dark"===t?"light":"dark")}},children:e})}function i(){let t=(0,s.useContext)(r);if(void 0===t)throw Error("useTheme must be used within a ThemeProvider");return t}},1837:function(t,e,a){"use strict";a.d(e,{g8:function(){return r},iJ:function(){return s}});let o=a(3464).Z.create({baseURL:"http://localhost:5000/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(t=>t,t=>Promise.reject(t)),o.interceptors.response.use(t=>t,t=>Promise.reject(t));let s={signup:async t=>(await o.post("/auth/signup",t,{headers:{"Content-Type":"multipart/form-data"}})).data,login:async t=>(await o.post("/auth/login",t)).data,oauthLogin:async t=>(await o.post("/auth/oauth/login",t)).data,resetPassword:async t=>(await o.post("/auth/reset-password",t)).data,logout:async()=>(await o.post("/auth/logout")).data,getMe:async()=>(await o.get("/auth/me")).data},r={getAllUsers:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await o.get("/users?page=".concat(t,"&limit=").concat(e))).data},getUserById:async t=>(await o.get("/users/".concat(t))).data,updateProfile:async t=>(await o.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteUser:async t=>(await o.delete("/users/".concat(t))).data}},6602:function(t,e,a){"use strict";a.d(e,{t:function(){return r}});var o=a(9625),s=a(1837);let r=(0,o.Ue)((t,e)=>({user:null,isLoading:!0,isAuthenticated:!1,login:async(e,a)=>{t({isLoading:!0});try{let o=await s.iJ.login({email:e,password:a});o.user&&(t({user:o.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:o.user,isAuthenticated:!0})))}catch(t){throw t}finally{t({isLoading:!1})}},oauthLogin:async(e,a,o)=>{t({isLoading:!0});try{console.log("Auth store: Starting OAuth login for provider:",e),console.log("Auth store: Access token length:",null==a?void 0:a.length),console.log("Auth store: User data:",o);let r=await s.iJ.oauthLogin({provider:e,accessToken:a,userData:o});return(console.log("Auth store: API response:",r),r.user)?(console.log("Auth store: Setting user and authentication state"),t({user:r.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:r.user,isAuthenticated:!0}))):console.log("Auth store: No user in response"),r}catch(t){throw console.error("Auth store: OAuth login error:",t),t}finally{t({isLoading:!1})}},signup:async e=>{t({isLoading:!0});try{let a=await s.iJ.signup(e);a.user&&(t({user:a.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:a.user,isAuthenticated:!0})))}catch(t){throw t}finally{t({isLoading:!1})}},logout:async()=>{t({isLoading:!0});try{await s.iJ.logout(),t({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}catch(e){console.error("Logout error:",e),t({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}finally{t({isLoading:!1})}},getMe:async()=>{t({isLoading:!0});try{let e=await s.iJ.getMe();e.user?(t({user:e.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:e.user,isAuthenticated:!0}))):(t({user:null,isAuthenticated:!1}),localStorage.removeItem("auth"))}catch(a){var e;(null===(e=a.response)||void 0===e?void 0:e.status)===401||console.error("Auth check error:",a),t({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}finally{t({isLoading:!1})}},setUser:e=>{t({user:e,isAuthenticated:!!e}),e?localStorage.setItem("auth",JSON.stringify({user:e,isAuthenticated:!0})):localStorage.removeItem("auth")},reset:()=>{t({user:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("auth")},initialize:()=>{try{let e=localStorage.getItem("auth");if(e){let{user:a,isAuthenticated:o}=JSON.parse(e);t({user:a,isAuthenticated:o,isLoading:!1})}else t({isLoading:!1})}catch(e){console.error("Error loading auth state:",e),localStorage.removeItem("auth"),t({isLoading:!1})}}}))},2778:function(){},9974:function(t){t.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(t){t.O(0,[635,42,64,971,117,744],function(){return t(t.s=657)}),_N_E=t.O()}]);