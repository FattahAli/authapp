(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9723:function(e,a,t){Promise.resolve().then(t.bind(t,8534))},8534:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Y}});var s=t(7437),r=t(2265),l=t(9376),n=t(7648),i=t(9501),o=t(3590),c=t(7119),d=t(9064),u=t(2381),x=t(279),m=t(5060),h=t(9820),g=t(6481),f=t(6602),p=t(3871),y=t(5674),b=t(9398),w=t(4098),v=t(2489),N=t(3448);let j=w.fC;w.xz;let k=w.h_;w.x8;let P=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(w.aV,{ref:a,className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});P.displayName=w.aV.displayName;let C=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(k,{children:[(0,s.jsx)(P,{}),(0,s.jsxs)(w.VY,{ref:a,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(w.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=w.VY.displayName;let E=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};E.displayName="DialogHeader";let S=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(w.Dx,{ref:a,className:(0,N.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});S.displayName=w.Dx.displayName;let I=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(w.dk,{ref:a,className:(0,N.cn)("text-sm text-muted-foreground",t),...r})});I.displayName=w.dk.displayName;var _=t(5291),F=t(6246);function Z(e){let{isOpen:a,onClose:t,onSuccess:l,provider:n,userData:i}=e,{oauthLogin:o,isLoading:c}=(0,f.t)(),{theme:h}=(0,b.F)(),[p,y]=(0,r.useState)(!1),[w,v]=(0,r.useState)(!0),[N,k]=(0,r.useState)(!1),[P,Z]=(0,r.useState)({name:i.name,gender:g.Y.PREFER_NOT_TO_SAY,age:""}),[O,A]=(0,r.useState)(null),[z,R]=(0,r.useState)(i.picture||null);r.useEffect(()=>{a&&(y(!1),v(!1))},[a]);let Y=async()=>{try{let e=i.id;(await o(n,e)).isNewUser?(d.ZP.success("".concat(n," login successful! Please complete your profile.")),t(),window.location.href="/profile"):(d.ZP.success("".concat(n," login successful!")),t(),null==l||l())}catch(n){var e,a,s,r,c,u,x;console.error("OAuth login error:",n);let l=(null===(a=n.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||n.message||"Login failed";if((null===(s=n.response)||void 0===s?void 0:s.status)===404&&(null===(c=n.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:r.requiresNewAccount))y(!0),(0,d.ZP)("Account not found. Please create a new account.");else if((null===(u=n.response)||void 0===u?void 0:u.status)===409){let e=null===(x=n.response)||void 0===x?void 0:x.data;(null==e?void 0:e.requiresPassword)?(d.ZP.error("Email already registered. Please use your password to sign in."),t()):(null==e?void 0:e.existingProvider)?(d.ZP.error(l),t()):d.ZP.error(l)}else d.ZP.error(l)}},q=async()=>{try{if(!P.name.trim()){d.ZP.error("Name is required");return}if(!P.age||1>parseInt(P.age)){d.ZP.error("Please enter a valid age");return}let e=i.id,a={name:P.name,age:parseInt(P.age),gender:P.gender};(await o(n,e,a)).isNewUser?(d.ZP.success("Account created successfully! Please complete your profile."),t(),window.location.href="/profile"):(d.ZP.success("Account created successfully!"),t(),null==l||l())}catch(n){var e,a,s,r;console.error("Account creation error:",n);let l=(null===(a=n.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||n.message||"Account creation failed";if((null===(s=n.response)||void 0===s?void 0:s.status)===409){let e=null===(r=n.response)||void 0===r?void 0:r.data;(null==e?void 0:e.requiresPassword)?(d.ZP.error("Email already registered. Please use your password to sign in."),t()):(null==e?void 0:e.existingProvider)?(d.ZP.error(l),t()):d.ZP.error(l)}else d.ZP.error(l)}};return(0,s.jsx)(j,{open:a,onOpenChange:t,children:(0,s.jsxs)(C,{className:"".concat("dark"===h?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(S,{className:"dark"===h?"text-white":"text-gray-900",children:p?"Create New Account":"Sign In or Create Account"}),(0,s.jsx)(I,{className:"dark"===h?"text-slate-400":"text-gray-600",children:p?"Please complete your profile information":"Welcome! Choose how you'd like to proceed with ".concat(i.email)})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 p-4 rounded-lg bg-slate-100 dark:bg-slate-700",children:[(0,s.jsxs)(F.qE,{className:"h-16 w-16",children:[(0,s.jsx)(F.F$,{src:z||void 0}),(0,s.jsx)(F.Q5,{className:"text-lg bg-indigo-600 text-white",children:i.name.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium ".concat("dark"===h?"text-white":"text-gray-900"),children:i.name}),(0,s.jsx)("p",{className:"text-sm ".concat("dark"===h?"text-slate-300":"text-gray-600"),children:i.email}),(0,s.jsxs)("p",{className:"text-xs ".concat("dark"===h?"text-slate-400":"text-gray-500"),children:[n," Account"]})]})]}),p?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{className:"dark"===h?"text-white":"text-gray-700",children:"Profile Picture"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(F.qE,{className:"h-20 w-20",children:[(0,s.jsx)(F.F$,{src:z||void 0}),(0,s.jsx)(F.Q5,{className:"text-lg bg-indigo-600 text-white",children:P.name.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(x.I,{type:"file",accept:"image/*",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(A(t),R(URL.createObjectURL(t)))},className:"cursor-pointer ".concat("dark"===h?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900")}),(0,s.jsx)("p",{className:"text-sm mt-1 ".concat("dark"===h?"text-slate-400":"text-gray-500"),children:"Upload a profile picture (optional)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"name",className:"dark"===h?"text-white":"text-gray-700",children:"Full Name"}),(0,s.jsx)(x.I,{id:"name",value:P.name,onChange:e=>Z({...P,name:e.target.value}),className:"".concat("dark"===h?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"age",className:"dark"===h?"text-white":"text-gray-700",children:"Age"}),(0,s.jsx)(x.I,{id:"age",type:"number",value:P.age,onChange:e=>Z({...P,age:e.target.value}),className:"".concat("dark"===h?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"gender",className:"dark"===h?"text-white":"text-gray-700",children:"Gender"}),(0,s.jsxs)(_.Ph,{value:P.gender,onValueChange:e=>Z({...P,gender:e}),children:[(0,s.jsx)(_.i4,{className:"".concat("dark"===h?"bg-slate-700 border-slate-600 text-white":"bg-white border-gray-300 text-gray-900"),children:(0,s.jsx)(_.ki,{placeholder:"Select your gender"})}),(0,s.jsxs)(_.Bw,{className:"dark"===h?"bg-slate-700 border-slate-600":"bg-white border-gray-300",children:[(0,s.jsx)(_.Ql,{value:g.Y.MALE,className:"dark"===h?"text-white hover:bg-slate-600":"text-gray-900 hover:bg-gray-100",children:"Male"}),(0,s.jsx)(_.Ql,{value:g.Y.FEMALE,className:"dark"===h?"text-white hover:bg-slate-600":"text-gray-900 hover:bg-gray-100",children:"Female"}),(0,s.jsx)(_.Ql,{value:g.Y.OTHER,className:"dark"===h?"text-white hover:bg-slate-600":"text-gray-900 hover:bg-gray-100",children:"Other"}),(0,s.jsx)(_.Ql,{value:g.Y.PREFER_NOT_TO_SAY,className:"dark"===h?"text-white hover:bg-slate-600":"text-gray-900 hover:bg-gray-100",children:"Prefer not to say"})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:()=>y(!1),className:"flex-1",disabled:c,children:"Back"}),(0,s.jsx)(u.z,{onClick:q,className:"flex-1",disabled:c,children:c?"Creating...":"Create Account"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-sm ".concat("dark"===h?"text-slate-300":"text-gray-600"),children:"Choose how you'd like to proceed:"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(u.z,{onClick:Y,className:"w-full",disabled:c,children:c?"Signing in...":"Sign In (if account exists)"}),(0,s.jsx)(u.z,{variant:"outline",onClick:()=>y(!0),className:"w-full",disabled:c,children:"Create New Account"})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(u.z,{variant:"ghost",onClick:t,className:"text-sm",disabled:c,children:"Cancel"})})]})]})]})})}var O=t(5526);function A(e){let{onSuccess:a,onError:t}=e,{oauthLogin:l,isLoading:n}=(0,f.t)(),{theme:i}=(0,b.F)(),[o,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[h,w]=(0,r.useState)(null),v=async()=>{try{await (0,O.qj)()}catch(a){let e=a.message||"Google login failed";d.ZP.error(e),null==t||t(e)}},N=async()=>{try{let e={id:"simple_facebook_auth_".concat(Date.now()),email:"demo.facebook".concat(Date.now(),"@example.com"),name:"Demo Facebook User ".concat(Date.now()%1e3),picture:"https://ui-avatars.com/api/?name=F".concat(Date.now()%1e3,"&background=1877f2&color=ffffff&size=150")};w(e),m(g.O.FACEBOOK),c(!0)}catch(a){let e=a.message||"Facebook login failed";d.ZP.error(e),null==t||t(e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(u.z,{type:"button",variant:"outline",className:"w-full ".concat("dark"===i?"bg-white text-gray-700 hover:bg-gray-100 hover:text-gray-800 border-gray-300":"bg-white text-gray-700 hover:bg-gray-50 hover:text-gray-800 border-gray-300"),onClick:v,disabled:n,children:[(0,s.jsx)(p.JM8,{className:"mr-2 h-5 w-5"}),"Continue with Google"]}),(0,s.jsxs)(u.z,{type:"button",variant:"outline",className:"w-full bg-blue-600 text-white hover:bg-blue-700 border-blue-600",onClick:N,disabled:n,children:[(0,s.jsx)(y.Am9,{className:"mr-2 h-5 w-5"}),"Continue with Facebook"]})]}),o&&x&&h&&(0,s.jsx)(Z,{isOpen:o,onClose:()=>{c(!1),m(null),w(null)},onSuccess:()=>{null==a||a()},provider:x,userData:h})]})}var z=t(4954);let R=c.Ry({email:c.Z_().email("Please enter a valid email address"),password:c.Z_().min(1,"Password is required")});function Y(){let e=(0,l.useRouter)(),{login:a,isLoading:t}=(0,f.t)(),[c,g]=(0,r.useState)(""),{theme:p}=(0,b.F)(),{register:y,handleSubmit:w,formState:{errors:v}}=(0,i.cI)({resolver:(0,o.F)(R)}),N=async t=>{try{g(""),await a(t.email,t.password),d.ZP.success("Login successful!"),e.push("/users")}catch(a){var s,r;let e=(null===(r=a.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Login failed";g(e),d.ZP.error(e)}};return(0,s.jsx)(z.Z,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 ".concat("dark"===p?"bg-slate-900":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-extrabold ".concat("dark"===p?"text-white":"text-gray-900"),children:"Sign in to your account"}),(0,s.jsxs)("p",{className:"mt-2 text-sm ".concat("dark"===p?"text-slate-400":"text-gray-600"),children:["Or"," ",(0,s.jsx)(n.default,{href:"/signup",className:"font-medium ".concat("dark"===p?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"),children:"create a new account"})]})]}),(0,s.jsxs)(h.Zb,{className:"".concat("dark"===p?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsxs)(h.Ol,{children:[(0,s.jsx)(h.ll,{className:"dark"===p?"text-white":"text-gray-900",children:"Login"}),(0,s.jsx)(h.SZ,{className:"dark"===p?"text-slate-400":"text-gray-600",children:"Enter your credentials to access your account"})]}),(0,s.jsxs)(h.aY,{className:"space-y-6",children:[(0,s.jsx)(A,{onSuccess:()=>{e.push("/users")},onError:e=>{g(e)}}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center ".concat("dark"===p?"border-slate-600":"border-gray-300"),children:(0,s.jsx)("span",{className:"w-full border-t ".concat("dark"===p?"border-slate-600":"border-gray-300")})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"px-2 ".concat("dark"===p?"bg-slate-800 text-slate-400":"bg-white text-gray-500"),children:"Or continue with"})})]}),(0,s.jsxs)("form",{onSubmit:w(N),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"email",className:"dark"===p?"text-white":"text-gray-700",children:"Email"}),(0,s.jsx)(x.I,{id:"email",type:"email",placeholder:"Enter your email",...y("email"),className:"".concat("dark"===p?"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-500"," ").concat(v.email?"border-red-500":"")}),v.email&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:v.email.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"password",className:"dark"===p?"text-white":"text-gray-700",children:"Password"}),(0,s.jsx)(x.I,{id:"password",type:"password",placeholder:"Enter your password",...y("password"),className:"".concat("dark"===p?"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-500"," ").concat(v.password?"border-red-500":"")}),v.password&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:v.password.message})]}),c&&(0,s.jsx)("div",{className:"text-sm text-red-400 bg-red-900/20 p-3 rounded-md border border-red-800",children:c}),(0,s.jsx)(u.z,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:t,children:t?"Signing in...":"Sign in"})]})]})]})]})})})}},6246:function(e,a,t){"use strict";t.d(a,{F$:function(){return o},Q5:function(){return c},qE:function(){return i}});var s=t(7437),r=t(2265),l=t(1146),n=t(3448);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.fC,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});i.displayName=l.fC.displayName;let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.Ee,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",t),...r})});o.displayName=l.Ee.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.NY,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});c.displayName=l.NY.displayName},9398:function(e,a,t){"use strict";t.d(a,{F:function(){return i},ThemeProvider:function(){return n}});var s=t(7437),r=t(2265);let l=(0,r.createContext)(void 0);function n(e){let{children:a}=e,[t,n]=(0,r.useState)("dark");return(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");e&&n(e)},[]),(0,r.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(t),localStorage.setItem("theme",t)},[t]),(0,s.jsx)(l.Provider,{value:{theme:t,toggleTheme:()=>{n(e=>"dark"===e?"light":"dark")}},children:a})}function i(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5526:function(e,a,t){"use strict";t.d(a,{qj:function(){return l},xS:function(){return n}});var s=t(6580);t(257);let r=(0,s.eI)("https://apnzuylximlxhtjqiwid.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwbnp1eWx4aW1seGh0anFpd2lkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwMDQ5MTQsImV4cCI6MjA2OTU4MDkxNH0.r-RAngC6orsWbkmI8gsbhqVPO7CI6c_NaLEEl_O76I0");async function l(){try{let{data:e,error:a}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(a)throw a;return e}catch(e){throw console.error("Error signing in with Google:",e),e}}async function n(){try{let{data:e,error:a}=await r.auth.getSession();if(a)throw console.error("Supabase session error:",a),a;if(!e.session){let{data:e,error:a}=await r.auth.getUser();if(a)throw console.error("Supabase user error:",a),a;if(e.user)return{session:{user:e.user,access_token:e.user.id,refresh_token:"",expires_in:3600,token_type:"bearer",user_metadata:e.user.user_metadata||{}}}}return e}catch(e){throw console.error("Error handling OAuth callback:",e),e}}}},function(e){e.O(0,[82,420,42,64,578,217,580,997,860,971,117,744],function(){return e(e.s=9723)}),_N_E=e.O()}]);