(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{5211:function(e,a,t){Promise.resolve().then(t.bind(t,205))},205:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var s=t(7437),r=t(2265),l=t(9376),n=t(6602),d=t(3552),c=t(9820),i=t(5805),o=t(7806),h=t(525),x=t(4401),g=t(1047),b=t(4084),u=t(6705),m=t(1837),j=t(9064),p=t(9398),y=t(3002);function N(){(0,l.useRouter)();let{isAuthenticated:e}=(0,n.t)(),[a,t]=(0,r.useState)(null),[b,N]=(0,r.useState)(!0),[v,k]=(0,r.useState)([]),{theme:f}=(0,p.F)();(0,r.useEffect)(()=>{w();let e=setInterval(w,3e4);return()=>clearInterval(e)},[]);let w=async()=>{try{N(!0);let e=await m.g8.getAllUsers(1,1e3);if(e.users){k(e.users);let a=O(e.users);t(a)}}catch(e){console.error("Error fetching analytics data:",e),j.ZP.error("Failed to load analytics data")}finally{N(!1)}},O=e=>{let a=new Date,t=a.getMonth(),s=a.getFullYear(),r={MALE:0,FEMALE:0,OTHER:0,PREFER_NOT_TO_SAY:0},l={"18-25":0,"26-35":0,"36-45":0,"46-55":0,"55+":0},n={"Email/Password":0,GOOGLE:0,FACEBOOK:0},d={},c=[],i=0;return e.forEach(e=>{e.gender&&r[e.gender]++,e.age&&(e.age>=18&&e.age<=25?l["18-25"]++:e.age>=26&&e.age<=35?l["26-35"]++:e.age>=36&&e.age<=45?l["36-45"]++:e.age>=46&&e.age<=55?l["46-55"]++:e.age>55&&l["55+"]++),e.oauthProvider?n[e.oauthProvider]++:n["Email/Password"]++;let a=new Date(e.createdAt),o="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"));d[o]=(d[o]||0)+1,a.getMonth()===t&&a.getFullYear()===s&&i++,c.push({id:e.id,name:e.name,action:"Joined",timestamp:e.createdAt})}),c.sort((e,a)=>new Date(a.timestamp).getTime()-new Date(e.timestamp).getTime()),{totalUsers:e.length,newUsersThisMonth:i,usersByGender:r,usersByAgeGroup:l,usersByOAuthProvider:n,usersByMonth:d,recentActivity:c.slice(0,10)}};return(0,s.jsx)(y.Z,{children:(0,s.jsx)(d.Z,{title:"",children:b?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"mb-6 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold ".concat("dark"===f?"text-white":"text-gray-900"),children:"Analytics Dashboard"}),(0,s.jsx)("p",{className:"text-lg ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:"View real-time analytics and user statistics"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-blue-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:"Total Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat("dark"===f?"text-white":"text-gray-900"),children:(null==a?void 0:a.totalUsers)||0})]})]})})}),(0,s.jsx)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-green-500/10 rounded-lg",children:(0,s.jsx)(o.Z,{className:"h-6 w-6 text-green-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:"New This Month"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat("dark"===f?"text-white":"text-gray-900"),children:(null==a?void 0:a.newUsersThisMonth)||0})]})]})})}),(0,s.jsx)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:(0,s.jsx)(h.Z,{className:"h-6 w-6 text-purple-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:"Growth Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat("dark"===f?"text-white":"text-gray-900"),children:[(null==a?void 0:a.totalUsers)?Math.round(a.newUsersThisMonth/a.totalUsers*100):0,"%"]})]})]})})}),(0,s.jsx)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:(0,s.jsx)(c.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-orange-500/10 rounded-lg",children:(0,s.jsx)(x.Z,{className:"h-6 w-6 text-orange-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:"OAuth Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat("dark"===f?"text-white":"text-gray-900"),children:(null==a?void 0:a.usersByOAuthProvider)?(a.usersByOAuthProvider.GOOGLE||0)+(a.usersByOAuthProvider.FACEBOOK||0):0})]})]})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"dark"===f?"text-white":"text-gray-900",children:"Gender Distribution"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(u.$I,{data:{labels:["Male","Female","Other","Prefer not to say"],datasets:[{label:"Users by Gender",data:[(null==a?void 0:a.usersByGender.MALE)||0,(null==a?void 0:a.usersByGender.FEMALE)||0,(null==a?void 0:a.usersByGender.OTHER)||0,(null==a?void 0:a.usersByGender.PREFER_NOT_TO_SAY)||0],backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 205, 86, 0.8)","rgba(75, 192, 192, 0.8)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 205, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"dark"===f?"#e2e8f0":"#374151"}}}}})})})]}),(0,s.jsxs)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"dark"===f?"text-white":"text-gray-900",children:"Age Group Distribution"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(u.$Q,{data:{labels:Object.keys((null==a?void 0:a.usersByAgeGroup)||{}),datasets:[{label:"Users by Age Group",data:Object.values((null==a?void 0:a.usersByAgeGroup)||{}),backgroundColor:"rgba(75, 192, 192, 0.8)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"dark"===f?"#e2e8f0":"#374151"}}},scales:{y:{ticks:{color:"dark"===f?"#e2e8f0":"#374151"},grid:{color:"dark"===f?"#334155":"#e5e7eb"}},x:{ticks:{color:"dark"===f?"#e2e8f0":"#374151"},grid:{color:"dark"===f?"#334155":"#e5e7eb"}}}}})})})]}),(0,s.jsxs)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"dark"===f?"text-white":"text-gray-900",children:"Authentication Methods"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(u.$I,{data:(()=>{let e=Object.entries((null==a?void 0:a.usersByOAuthProvider)||{}).filter(e=>{let[a,t]=e;return t>0});return 0===e.length?{labels:["No Data"],datasets:[{label:"Users by Authentication Method",data:[1],backgroundColor:["rgba(128, 128, 128, 0.8)"],borderColor:["rgba(128, 128, 128, 1)"],borderWidth:1}]}:{labels:e.map(e=>{let[a,t]=e;switch(a){case"GOOGLE":return"Google";case"FACEBOOK":return"Facebook";case"Email/Password":return"Email/Password";default:return a}}),datasets:[{label:"Users by Authentication Method",data:e.map(e=>{let[a,t]=e;return t}),backgroundColor:["rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)","rgba(255, 205, 86, 0.8)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 205, 86, 1)"],borderWidth:1}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"dark"===f?"#e2e8f0":"#374151"}}}}})})})]}),(0,s.jsxs)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"dark"===f?"text-white":"text-gray-900",children:"Monthly User Growth"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(u.x1,{data:(()=>{let e=Object.keys((null==a?void 0:a.usersByMonth)||{}).sort(),t=e.map(e=>(null==a?void 0:a.usersByMonth[e])||0);if(e.length<=1){let e=new Date,a=[],s=[];for(let r=5;r>=0;r--){let l=new Date(e.getFullYear(),e.getMonth()-r,1);"".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"));let n=0;n=5===r?1:4===r?2:3===r?3:2===r?2:1===r?4:t[0]||4,a.push(n),s.push(l.toLocaleDateString("en-US",{month:"short",year:"numeric"}))}return{labels:s,datasets:[{label:"Monthly User Growth",data:a,fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",tension:.4}]}}return{labels:e.map(e=>{let[a,t]=e.split("-");return new Date(parseInt(a),parseInt(t)-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),datasets:[{label:"Monthly User Growth",data:t,fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",tension:.4}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"dark"===f?"#e2e8f0":"#374151"}}},scales:{y:{ticks:{color:"dark"===f?"#e2e8f0":"#374151"},grid:{color:"dark"===f?"#334155":"#e5e7eb"}},x:{ticks:{color:"dark"===f?"#e2e8f0":"#374151"},grid:{color:"dark"===f?"#334155":"#e5e7eb"}}}}})})})]})]}),(0,s.jsxs)(c.Zb,{className:"".concat("dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"),children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{className:"dark"===f?"text-white":"text-gray-900",children:"Recent Activity"})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"space-y-3",children:null==a?void 0:a.recentActivity.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat("dark"===f?"bg-slate-700/50":"bg-gray-50"),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-green-500/10 rounded-full",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-green-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat("dark"===f?"text-white":"text-gray-900"),children:e.name}),(0,s.jsx)("p",{className:"text-xs ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:e.action})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-xs ".concat("dark"===f?"text-slate-400":"text-gray-600"),children:[(0,s.jsx)(g.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]},e.id))})})]})]})})})}b.kL.register(b.uw,b.f$,b.ZL,b.Dx,b.u,b.De,b.qi,b.od,b.jn,b.Gu)}},function(e){e.O(0,[674,42,64,578,821,854,971,117,744],function(){return e(e.s=5211)}),_N_E=e.O()}]);