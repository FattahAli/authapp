"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{3002:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(7437),s=r(2265),n=r(9376),i=r(6602);function o(e){let{children:t,redirectTo:r="/login"}=e,o=(0,n.useRouter)(),{isAuthenticated:l,getMe:c,isLoading:d}=(0,i.t)(),u=(0,s.useRef)(!1),h=(0,s.useRef)(!1);return((0,s.useEffect)(()=>{u.current||h.current||l||(u.current=!0,c().catch(()=>{h.current=!0}))},[c,l]),(0,s.useEffect)(()=>{d||l||o.push(r)},[l,d,o,r]),d&&!u.current)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):l?(0,a.jsx)(a.Fragment,{children:t}):null}},3552:function(e,t,r){r.d(t,{Z:function(){return j}});var a=r(7437),s=r(9376),n=r(7648),i=r(2381),o=r(6246),l=r(6602),c=r(2369),d=r(5805),u=r(6221),h=r(8293),g=r(4286),f=r(2489),m=r(7692),x=r(2265),p=r(9064),v=r(5929),y=r(7226),N=r(9398);function w(){let{theme:e,toggleTheme:t}=(0,N.F)();return(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:t,className:"w-10 h-10 p-0",children:["dark"===e?(0,a.jsx)(v.Z,{className:"h-4 w-4"}):(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}function j(e){var t;let{children:r,title:v}=e,y=(0,s.useRouter)(),{user:j,logout:b,isAuthenticated:k}=(0,l.t)(),[A,S]=(0,x.useState)(!1),{theme:L}=(0,N.F)(),C=async()=>{try{await b(),y.push("/login"),p.ZP.success("Logged out successfully")}catch(e){p.ZP.error("Logout failed")}},E=[{name:"Profile",icon:c.Z,href:"/profile",description:"Edit your profile"},{name:"All Users",icon:d.Z,href:"/users",description:"View all users"},{name:"Graphs",icon:u.Z,href:"/graphs",description:"View analytics"}];return k?(0,a.jsxs)("div",{className:"min-h-screen ".concat("dark"===L?"bg-slate-900":"bg-gray-50"),children:[A&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>S(!1)}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>S(!0),className:"fixed top-4 left-4 z-50 lg:hidden ".concat("dark"===L?"text-slate-300 hover:text-white hover:bg-slate-700/50 bg-slate-800/95":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 bg-white/95"," rounded-lg shadow-lg"),children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})}),(0,a.jsx)("aside",{className:"\n        fixed top-0 left-0 z-50 w-64 ".concat("dark"===L?"bg-indigo-900":"bg-indigo-50"," shadow-xl h-screen transform transition-transform duration-300 ease-in-out\n        ").concat(A?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b ".concat("dark"===L?"border-indigo-700":"border-indigo-200"),children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(n.default,{href:"/users",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity group",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg transition-all duration-200 group-hover:scale-105 ".concat("bg-indigo-600 text-white"),children:(0,a.jsx)(g.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xl font-bold ".concat("dark"===L?"text-white":"text-gray-900"),children:"Authify"}),(0,a.jsx)("span",{className:"text-xs ".concat("dark"===L?"text-indigo-300":"text-indigo-600"),children:"Secure Auth"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w,{}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>S(!1),className:"lg:hidden ".concat("dark"===L?"text-indigo-300 hover:text-white hover:bg-indigo-700":"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100"),children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"p-4 border-b ".concat("dark"===L?"border-indigo-700":"border-indigo-200"),children:(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat("dark"===L?"bg-indigo-800/50":"bg-indigo-100/50"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(o.qE,{className:"h-8 w-8",children:[(0,a.jsx)(o.F$,{src:null==j?void 0:j.profilePicture}),(0,a.jsx)(o.Q5,{className:"bg-indigo-600 text-white text-sm",children:null==j?void 0:null===(t=j.name)||void 0===t?void 0:t.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate ".concat("dark"===L?"text-white":"text-gray-900"),children:null==j?void 0:j.name}),(0,a.jsx)("p",{className:"text-xs truncate ".concat("dark"===L?"text-indigo-300":"text-indigo-600"),children:null==j?void 0:j.email})]})]})})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:E.map(e=>{let t=e.icon;return(0,a.jsx)(n.default,{href:e.href,children:(0,a.jsxs)(i.z,{variant:"ghost",className:"w-full justify-start h-12 ".concat("dark"===L?"text-indigo-200 hover:text-white hover:bg-indigo-700":"text-indigo-700 hover:text-indigo-900 hover:bg-indigo-100"),onClick:()=>S(!1),children:[(0,a.jsx)(t,{className:"h-5 w-5 mr-3"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-xs ".concat("dark"===L?"text-indigo-300":"text-indigo-500"),children:e.description})]})]})},e.name)})}),(0,a.jsx)("div",{className:"p-4 border-t ".concat("dark"===L?"border-indigo-700":"border-indigo-200"),children:(0,a.jsxs)(i.z,{variant:"ghost",className:"w-full justify-start h-12 ".concat("dark"===L?"text-red-300 hover:text-red-200 hover:bg-red-900/20":"text-red-600 hover:text-red-700 hover:bg-red-50"),onClick:C,children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-3"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-medium",children:"Sign Out"}),(0,a.jsx)("div",{className:"text-xs ".concat("dark"===L?"text-indigo-300":"text-indigo-500"),children:"Logout from account"})]})]})})]})}),(0,a.jsx)("div",{className:"lg:ml-64",children:(0,a.jsx)("main",{className:"p-4 sm:p-6 lg:p-8 min-h-screen ".concat("dark"===L?"bg-slate-900":"bg-gray-50"),children:r})})]}):null}},6246:function(e,t,r){r.d(t,{F$:function(){return l},Q5:function(){return c},qE:function(){return o}});var a=r(7437),s=r(2265),n=r(1146),i=r(3448);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});o.displayName=n.fC.displayName;let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...s})});l.displayName=n.Ee.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});c.displayName=n.NY.displayName},2381:function(e,t,r){r.d(t,{z:function(){return c}});var a=r(7437),s=r(2265),n=r(7053),i=r(535),o=r(3448);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},9820:function(e,t,r){r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},9398:function(e,t,r){r.d(t,{F:function(){return o},ThemeProvider:function(){return i}});var a=r(7437),s=r(2265);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e)},[]),(0,s.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(r),localStorage.setItem("theme",r)},[r]),(0,a.jsx)(n.Provider,{value:{theme:r,toggleTheme:()=>{i(e=>"dark"===e?"light":"dark")}},children:t})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},1837:function(e,t,r){r.d(t,{g8:function(){return n},iJ:function(){return s}});let a=r(3464).Z.create({baseURL:"http://localhost:5000/api",withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e,e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>Promise.reject(e));let s={signup:async e=>(await a.post("/auth/signup",e,{headers:{"Content-Type":"multipart/form-data"}})).data,login:async e=>(await a.post("/auth/login",e)).data,oauthLogin:async e=>(await a.post("/auth/oauth/login",e)).data,resetPassword:async e=>(await a.post("/auth/reset-password",e)).data,logout:async()=>(await a.post("/auth/logout")).data,getMe:async()=>(await a.get("/auth/me")).data},n={getAllUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await a.get("/users?page=".concat(e,"&limit=").concat(t))).data},getUserById:async e=>(await a.get("/users/".concat(e))).data,updateProfile:async e=>(await a.put("/users/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteUser:async e=>(await a.delete("/users/".concat(e))).data}},3448:function(e,t,r){r.d(t,{cn:function(){return n},n:function(){return o},p:function(){return i}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function o(e){switch(e){case"MALE":return"Male";case"FEMALE":return"Female";case"OTHER":return"Other";case"PREFER_NOT_TO_SAY":return"Prefer not to say";default:return e}}},6602:function(e,t,r){r.d(t,{t:function(){return n}});var a=r(9625),s=r(1837);let n=(0,a.Ue)((e,t)=>({user:null,isLoading:!0,isAuthenticated:!1,login:async(t,r)=>{e({isLoading:!0});try{let a=await s.iJ.login({email:t,password:r});a.user&&(e({user:a.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:a.user,isAuthenticated:!0})))}catch(e){throw e}finally{e({isLoading:!1})}},oauthLogin:async(t,r,a)=>{e({isLoading:!0});try{console.log("Auth store: Starting OAuth login for provider:",t),console.log("Auth store: Access token length:",null==r?void 0:r.length),console.log("Auth store: User data:",a);let n=await s.iJ.oauthLogin({provider:t,accessToken:r,userData:a});return(console.log("Auth store: API response:",n),n.user)?(console.log("Auth store: Setting user and authentication state"),console.log("Auth store: User data to set:",n.user),e({user:n.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:n.user,isAuthenticated:!0})),console.log("Auth store: Saved to localStorage")):console.log("Auth store: No user in response"),n}catch(e){throw console.error("Auth store: OAuth login error:",e),e}finally{e({isLoading:!1})}},signup:async t=>{e({isLoading:!0});try{let r=await s.iJ.signup(t);r.user&&(e({user:r.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:r.user,isAuthenticated:!0})))}catch(e){throw e}finally{e({isLoading:!1})}},logout:async()=>{e({isLoading:!0});try{await s.iJ.logout(),e({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}catch(t){console.error("Logout error:",t),e({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}finally{e({isLoading:!1})}},getMe:async()=>{e({isLoading:!0});try{let t=await s.iJ.getMe();t.user?(e({user:t.user,isAuthenticated:!0}),localStorage.setItem("auth",JSON.stringify({user:t.user,isAuthenticated:!0}))):(e({user:null,isAuthenticated:!1}),localStorage.removeItem("auth"))}catch(r){var t;(null===(t=r.response)||void 0===t?void 0:t.status)===401||console.error("Auth check error:",r),e({user:null,isAuthenticated:!1}),localStorage.removeItem("auth")}finally{e({isLoading:!1})}},setUser:t=>{e({user:t,isAuthenticated:!!t}),t?localStorage.setItem("auth",JSON.stringify({user:t,isAuthenticated:!0})):localStorage.removeItem("auth")},reset:()=>{e({user:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("auth")},initialize:()=>{try{let t=localStorage.getItem("auth");if(t){let{user:r,isAuthenticated:a}=JSON.parse(t);e({user:r,isAuthenticated:a,isLoading:!1})}else e({isLoading:!1})}catch(t){console.error("Error loading auth state:",t),localStorage.removeItem("auth"),e({isLoading:!1})}}}))}}]);